{"format_version":"1.2","terraform_version":"1.6.4","variables":{"TF_VAR_AWS_ACCESS_KEY_ID":{"value":"ASIA5NAGIDAVEQEZ6JUX"},"TF_VAR_AWS_ACCOUNT_ID":{"value":921283598378},"TF_VAR_AWS_PROFILE":{"value":"system-admin"},"TF_VAR_AWS_REGION":{"value":"us-east-1"},"TF_VAR_AWS_SECRET_ACCESS_KEY":{"value":"c0J6DdYCP5YBBAxfhqjaG8fKBg7r0nWJgtfFkwQ5"},"TF_VAR_AWS_SESSION_TOKEN":{"value":"IQoJb3JpZ2luX2VjEOD//////////wEaCXVzLWVhc3QtMSJIMEYCIQCsNC7Y1jPbvTMcnT+XgOm2VexLBkZbeEXI/h//hTTpEgIhAJyTHYpSXChmto7pbKqRLzan1daBhj3LtuCcw5Yj+Te4KusBCHkQABoMOTIxMjgzNTk4Mzc4Igz6rdAUD3uZ9d1g/PQqyAEUH9cTZkRUTEkdXa9wdAr8ihNFfCMJDMCTiNS31zoJBLg5jz2caBfNVgRdTKq4dobYzI2B6JKA95sqdsS6hgEgvwAhMdIgNBpLe48EclAo2uDfAfo9hY574WGzYgl3PnVh6pbhxRN+Oq7zNAoi6g2hAYvfRw0Qu0o3rdgrquFFppgT/uKD9aLeI5gY5IuA0xr8BrmqZuBFlv/SyGAbihXZwNtGjDBsFlndD3rwNgOWt2AXJ5Uz7jX4LIPyAer4C19fLLoLY73WqTDHiaezBjqXAW4VaL3r5LRdMoZaNwJpFgDqfOrYvXjp2/5vWx3XsQP9LEqeeA1Gg5AWQLd/GTQiLtAp0LQIDZ+EX5ZhPNLmq18TOPs3bhI/hgHup4xxJNMCFdJbob61EyaJRipHKlOe28MwNsAaaGQ50xKAIHkJjhNn/eJ9DFCrg7hSjgtpPqHDP/v2MfJkmJ8Lazu0LNoomnDyuVSk7Mk="},"custom_role_name_prefix":{"value":"custom"},"ecr_poweruser_policy_arn":{"value":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryPowerUser"},"ecrpush_role_name_prefix":{"value":"ECR_ReadWrite"},"force_detach_policies":{"value":"false"},"force_image_rebuild":{"value":false},"github_actions_oidc_url":{"value":"https://token.actions.githubusercontent.com"},"hash_script":{"value":""},"iam_role_path":{"value":"/"},"iam_role_permissions_boundary":{"value":""},"is_create_custom_oicd_role":{"value":false},"is_create_ecrpush_oicd_role":{"value":false},"is_create_github_oidc":{"value":true},"is_create_oidc_provider":{"value":true},"is_create_securityscan_oicd_role":{"value":false},"max_session_duration":{"value":3600},"push_script":{"value":""},"repository_provider":{"value":"https://github.com"},"role_name_suffix":{"value":"GithubOIDCRole"},"securityscan_role_name_prefix":{"value":"SecurityScan"},"tag":{"value":"latest"},"tags":{"value":{}},"username":{"value":"franroav"},"workflow_provider":{"value":"https://token.actions.githubusercontent.com"}},"planned_values":{"outputs":{"account_id":{"sensitive":false,"type":"string","value":"921283598378"},"caller_arn":{"sensitive":false,"type":"string","value":"arn:aws:iam::921283598378:user/francisco"},"caller_user":{"sensitive":false,"type":"string","value":"AIDA5NAGIDAVPAU3F2OZD"},"docker_build_context":{"sensitive":false,"type":"string","value":"./containers"},"ecr_repository_urls":{"sensitive":false},"ecrpush_role_arn":{"sensitive":false,"type":"dynamic","value":null},"ecrpush_role_name":{"sensitive":false,"type":"dynamic","value":null},"ecrpush_role_policy_attachment_arn":{"sensitive":false,"type":"dynamic","value":null},"github_actions_oidc_provider_arn":{"sensitive":false},"trigged_by":{"sensitive":false,"type":["object",{"api":["map","string"],"fluentd":["map","string"],"frontend":["map","string"]}],"value":{"api":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"},"fluentd":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"},"frontend":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"}}}},"root_module":{"resources":[{"address":"aws_ecr_repository.ecr_repos[\"api\"]","mode":"managed","type":"aws_ecr_repository","name":"ecr_repos","index":"api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"encryption_configuration":[],"force_delete":true,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"api-repo","tags":{"env":"dev","name":"api-repo"},"tags_all":{"env":"dev","name":"api-repo"},"timeouts":null},"sensitive_values":{"encryption_configuration":[],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}},{"address":"aws_ecr_repository.ecr_repos[\"fluentd\"]","mode":"managed","type":"aws_ecr_repository","name":"ecr_repos","index":"fluentd","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"encryption_configuration":[],"force_delete":true,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"fluentd-repo","tags":{"env":"dev","name":"fluentd-repo"},"tags_all":{"env":"dev","name":"fluentd-repo"},"timeouts":null},"sensitive_values":{"encryption_configuration":[],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}},{"address":"aws_ecr_repository.ecr_repos[\"frontend\"]","mode":"managed","type":"aws_ecr_repository","name":"ecr_repos","index":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"encryption_configuration":[],"force_delete":true,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"frontend-repo","tags":{"env":"dev","name":"frontend-repo"},"tags_all":{"env":"dev","name":"frontend-repo"},"timeouts":null},"sensitive_values":{"encryption_configuration":[],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}},{"address":"aws_iam_openid_connect_provider.github_actions","mode":"managed","type":"aws_iam_openid_connect_provider","name":"github_actions","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"client_id_list":["https://github.com/franroav"],"tags":null,"thumbprint_list":["1b511abead59c6ce207077c0bf0e0043b1382612"],"url":"https://token.actions.githubusercontent.com"},"sensitive_values":{"client_id_list":[false],"tags_all":{},"thumbprint_list":[false]}},{"address":"data.aws_iam_policy_document.federated_assume_policy[0]","mode":"data","type":"aws_iam_policy_document","name":"federated_assume_policy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRoleWithWebIdentity"],"condition":[{"test":"StringLike","values":["repo:api:*","repo:fluentd:*","repo:frontend:*"],"variable":"token.actions.githubusercontent.com:sub"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":[null],"type":"Federated"}],"resources":null,"sid":null}],"version":null},"sensitive_values":{"statement":[{"actions":[false],"condition":[{"values":[false,false,false]}],"not_principals":[],"principals":[{"identifiers":[false]}]}]}},{"address":"null_resource.build_push_dkr_img[\"api\"]","mode":"managed","type":"null_resource","name":"build_push_dkr_img","index":"api","provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"triggers":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"}},"sensitive_values":{"triggers":{}}},{"address":"null_resource.build_push_dkr_img[\"fluentd\"]","mode":"managed","type":"null_resource","name":"build_push_dkr_img","index":"fluentd","provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"triggers":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"}},"sensitive_values":{"triggers":{}}},{"address":"null_resource.build_push_dkr_img[\"frontend\"]","mode":"managed","type":"null_resource","name":"build_push_dkr_img","index":"frontend","provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"triggers":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"}},"sensitive_values":{"triggers":{}}}]}},"resource_changes":[{"address":"data.aws_iam_policy_document.federated_assume_policy[0]","mode":"data","type":"aws_iam_policy_document","name":"federated_assume_policy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRoleWithWebIdentity"],"condition":[{"test":"StringLike","values":["repo:api:*","repo:fluentd:*","repo:frontend:*"],"variable":"token.actions.githubusercontent.com:sub"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":[null],"type":"Federated"}],"resources":null,"sid":null}],"version":null},"after_unknown":{"id":true,"json":true,"minified_json":true,"statement":[{"actions":[false],"condition":[{"values":[false,false,false]}],"not_principals":[],"principals":[{"identifiers":[true]}]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false],"condition":[{"values":[false,false,false]}],"not_principals":[],"principals":[{"identifiers":[false]}]}]}},"action_reason":"read_because_config_unknown"},{"address":"aws_ecr_repository.ecr_repos[\"api\"]","mode":"managed","type":"aws_ecr_repository","name":"ecr_repos","index":"api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encryption_configuration":[],"force_delete":true,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"api-repo","tags":{"env":"dev","name":"api-repo"},"tags_all":{"env":"dev","name":"api-repo"},"timeouts":null},"after_unknown":{"arn":true,"encryption_configuration":[],"id":true,"image_scanning_configuration":[{}],"registry_id":true,"repository_url":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}}},{"address":"aws_ecr_repository.ecr_repos[\"fluentd\"]","mode":"managed","type":"aws_ecr_repository","name":"ecr_repos","index":"fluentd","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encryption_configuration":[],"force_delete":true,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"fluentd-repo","tags":{"env":"dev","name":"fluentd-repo"},"tags_all":{"env":"dev","name":"fluentd-repo"},"timeouts":null},"after_unknown":{"arn":true,"encryption_configuration":[],"id":true,"image_scanning_configuration":[{}],"registry_id":true,"repository_url":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}}},{"address":"aws_ecr_repository.ecr_repos[\"frontend\"]","mode":"managed","type":"aws_ecr_repository","name":"ecr_repos","index":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encryption_configuration":[],"force_delete":true,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"frontend-repo","tags":{"env":"dev","name":"frontend-repo"},"tags_all":{"env":"dev","name":"frontend-repo"},"timeouts":null},"after_unknown":{"arn":true,"encryption_configuration":[],"id":true,"image_scanning_configuration":[{}],"registry_id":true,"repository_url":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}}},{"address":"aws_iam_openid_connect_provider.github_actions","mode":"managed","type":"aws_iam_openid_connect_provider","name":"github_actions","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"client_id_list":["https://github.com/franroav"],"tags":null,"thumbprint_list":["1b511abead59c6ce207077c0bf0e0043b1382612"],"url":"https://token.actions.githubusercontent.com"},"after_unknown":{"arn":true,"client_id_list":[false],"id":true,"tags_all":true,"thumbprint_list":[false]},"before_sensitive":false,"after_sensitive":{"client_id_list":[false],"tags_all":{},"thumbprint_list":[false]}}},{"address":"null_resource.build_push_dkr_img[\"api\"]","mode":"managed","type":"null_resource","name":"build_push_dkr_img","index":"api","provider_name":"registry.terraform.io/hashicorp/null","change":{"actions":["create"],"before":null,"after":{"triggers":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"}},"after_unknown":{"id":true,"triggers":{}},"before_sensitive":false,"after_sensitive":{"triggers":{}}}},{"address":"null_resource.build_push_dkr_img[\"fluentd\"]","mode":"managed","type":"null_resource","name":"build_push_dkr_img","index":"fluentd","provider_name":"registry.terraform.io/hashicorp/null","change":{"actions":["create"],"before":null,"after":{"triggers":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"}},"after_unknown":{"id":true,"triggers":{}},"before_sensitive":false,"after_sensitive":{"triggers":{}}}},{"address":"null_resource.build_push_dkr_img[\"frontend\"]","mode":"managed","type":"null_resource","name":"build_push_dkr_img","index":"frontend","provider_name":"registry.terraform.io/hashicorp/null","change":{"actions":["create"],"before":null,"after":{"triggers":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"}},"after_unknown":{"id":true,"triggers":{}},"before_sensitive":false,"after_sensitive":{"triggers":{}}}}],"output_changes":{"account_id":{"actions":["create"],"before":null,"after":"921283598378","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"caller_arn":{"actions":["create"],"before":null,"after":"arn:aws:iam::921283598378:user/francisco","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"caller_user":{"actions":["create"],"before":null,"after":"AIDA5NAGIDAVPAU3F2OZD","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"docker_build_context":{"actions":["create"],"before":null,"after":"./containers","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"ecr_repository_urls":{"actions":["create"],"before":null,"after":{},"after_unknown":{"api":true,"fluentd":true,"frontend":true},"before_sensitive":false,"after_sensitive":false},"ecrpush_role_arn":{"actions":["no-op"],"before":null,"after":null,"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"ecrpush_role_name":{"actions":["no-op"],"before":null,"after":null,"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"ecrpush_role_policy_attachment_arn":{"actions":["no-op"],"before":null,"after":null,"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"github_actions_oidc_provider_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"trigged_by":{"actions":["create"],"before":null,"after":{"api":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"},"fluentd":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"},"frontend":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"}},"after_unknown":false,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.6.4","values":{"outputs":{"account_id":{"sensitive":false,"value":"921283598378","type":"string"},"caller_arn":{"sensitive":false,"value":"arn:aws:iam::921283598378:user/francisco","type":"string"},"caller_user":{"sensitive":false,"value":"AIDA5NAGIDAVPAU3F2OZD","type":"string"},"docker_build_context":{"sensitive":false,"value":"./containers","type":"string"},"trigged_by":{"sensitive":false,"value":{"api":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"},"fluentd":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"},"frontend":{"detect_docker_source_changes":"4193b1ed21fe692ccba91d2f696fb3faec4cccaf790e4a0f19b7a026d3d576b7"}},"type":["object",{"api":["map","string"],"fluentd":["map","string"],"frontend":["map","string"]}]}},"root_module":{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"921283598378","arn":"arn:aws:iam::921283598378:user/francisco","id":"921283598378","user_id":"AIDA5NAGIDAVPAU3F2OZD"},"sensitive_values":{}},{"address":"data.aws_ecr_authorization_token.token","mode":"data","type":"aws_ecr_authorization_token","name":"token","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"authorization_token":"QVdTOmV5SndZWGxzYjJGa0lqb2lWVm8yUWxkNU9WcFFSblUzY0V0SGMycFhTbVYyU1RGTFkxTnBNa2x3VVdsaE0wOVBTVGx3U2tKWmRrUXhRbUpKWW0xWVptbGFhalJOUTJWSlRuazROa040VHpjelJXNVVjVmxoZWpNMVUxZG1hbWR4TldJMmFrWmthbU5IZVhoaU16UnpZVmhKV0hCTmFXWnJjMUIwVkhGQ1kwZFZTakZvYW5KWVQyUkdRMDlHUjJRdlZWTlNWakJoWlV0UFpYSnpRbFV5S3pCYVFsSklSSFkwZUdad2VqbEJPR2xEUTBKTllrUm1kMFJ2Y2xoYUsxWkxRMko1ZFVaTk5FdHRORTVOVkd4VEwyYzFXQzlTTVcxaFoyWnVjR0ZWVG04NWJUaGxObVZ1TWxGbloyNW1hMHhMVWxsblpEZHlVR2d6WmtaM2JqaFBXSFp6WlRCVkszQjFTRGc0U1d0b09VbGxZbGRTWW5OV1VHZDNaWGRtYURSUmNrdHJlVzgzTDI5U1UyRnlPWEZHZDA1MVFrdGhVMUE0VWk4ek5VdDZXWGh1WVdOUGRVeHFXalV4U0hCVGExQjVjbkZ5T0ZRNFowSlVUVUZRY3pkc2QyTk1WM0I0ZG05VE4zRktVVW96UWt0SWNYWkthbmRhUlhOaWEzTjVLMlprZVVSTFJXcGlWSEZHZHpGdE1pdFRVM2QySzJSclJHY3dORVI2U1ZGMFdXSlVlVnA1VlRaTk0ybG1iRTVYUVVGd1dIbG9OR296YmtvM1ZXZDRTRXh0YjNGM2FURk9jRUZOVFM4NFNuWlZNMmd3VG5WaFZIVjBTVVpMUjA1ck4zTmFNMEZaTkhkSlIwaHJXVVJsTTJ4c1VHdzNRMk51UkdGMGJUTTFOMnhNY1ZCbGN6TkpNamQ2VmtoeVkyTnhlWE00V2t0RldEZFNRWE5XYW10d1ZuVjFWVWx4UlVaVFQybzRiamhWTWpoRVZVSkNPRTlyU1RkbFZYRXdWM1V3S3pkdFEzb3ljWGxLVkZJeVIybEpRa0kyY1ZaU1dVRXZVR3hKTlRSYWRIZHRUVmR6TUZrNFp6UTRWRGRCYTFGcFRuSnVjVXd4WTFsV1JISm5NbFZTTlZSc00wNUVNM1ZyZVVOSU5IRjRlVkp1ZHpKSk9UZzVkR1pLU2pSdFRtdFJhVmhuVG1kVGQxZHZka3hQSzBwUFNIcEpSR2hFV25oaFpsUnNNekZPY2toQ05scE5WR2hrVFM5ck1DdHpZVVJ2WW5wUFRTOUVaRFZPWW1saWVqVkljRVV6ZWt0T056VkxUVVl6UjNBMmFVcE1PVlpSTUhSVmJWbHBWemRxWjBOU1JUZHFLMUYzVFRWeFNHRjJXRkEzUlRKR2NVbzVlakJHY25Kb1dXdHVhekpHUTBoeWMwSnJjMVp5UkN0NWNEWlJlazQyZWtaUWNVOTZZbEZOWldaWVNVNUdWSE5JWmtaMmQxVkNibmhsUjA5aVdVRnVVMHRtWkdSWVIxVjZZaTlOY2xCbkt6TlNVVWRTWVZOUk4wOWFWbXhSVGpKWVJUWlFTVXB3TlZkV2J6aDNObGhZUTNwTFVXTnpXRkpqUVRJeWFUZEVUVVZVVkhKSVdIVlpVMjU0UmpWUU5Xa3ZWMDU2TkVsVU1WQTVUbEJ3TUM5M1ZYcHFkV1EyTlZWcU0xRnNRVUkwYTBrMUswRm5OMEZSTjIxVFJGVkZWM2czUlZrd2NISnVNVXBVYkd4SGRsZHdTMDAxYzBaSE9EVXJOM3BWVVhORVlsRXZRWGxCWldsbFpHTnVTVmxIZDBNd1EwZ3dkRVF3WTJoRU0wRlNSR2RUVG10ek5TOU9NbnBuTVdSSk5tUnhZVFJqZG5nMGRVeEtXR3BGWkVFOVBTSXNJbVJoZEdGclpYa2lPaUpCVVVWQ1FVaG9kMjB3V1dGSlUwcGxVblJLYlRWdU1VYzJkWEZsWld0WWRXOVlXRkJsTlZWR1kyVTVVbkU0THpFMGQwRkJRVWcwZDJaQldVcExiMXBKYUhaalRrRlJZMGR2UnpoM1lsRkpRa0ZFUW05Q1oydHhhR3RwUnpsM01FSkNkMFYzU0dkWlNsbEpXa2xCVjFWRVFrRkZkVTFDUlVWRVFTODNiMEl5WlM5S0x6QXZSMlJFVUZGSlFrVkpRVGM1YzJFMVkwdFJTVXhQZDBaMGJGazJkbFV6V1dkalQyTmlaMFIxVDBOQ2FsZE1XbEZYUnpOT1FsaDFNa2hSUkc5R2RFOXNkSGhGWVd3NWJubFhXR0ZQTVZvNGFqRlhZVTFzWkRBdlJrVlZQU0lzSW5abGNuTnBiMjRpT2lJeUlpd2lkSGx3WlNJNklrUkJWRUZmUzBWWklpd2laWGh3YVhKaGRHbHZiaUk2TVRjeE9ESTFOamt3TVgwPQ==","expires_at":"2024-06-13T05:35:01Z","id":"us-east-1","password":"eyJwYXlsb2FkIjoiVVo2Qld5OVpQRnU3cEtHc2pXSmV2STFLY1NpMklwUWlhM09PSTlwSkJZdkQxQmJJYm1YZmlaajRNQ2VJTnk4NkN4TzczRW5UcVlhejM1U1dmamdxNWI2akZkamNHeXhiMzRzYVhJWHBNaWZrc1B0VHFCY0dVSjFoanJYT2RGQ09GR2QvVVNSVjBhZUtPZXJzQlUyKzBaQlJIRHY0eGZwejlBOGlDQ0JNYkRmd0RvclhaK1ZLQ2J5dUZNNEttNE5NVGxTL2c1WC9SMW1hZ2ZucGFVTm85bThlNmVuMlFnZ25ma0xLUllnZDdyUGgzZkZ3bjhPWHZzZTBVK3B1SDg4SWtoOUllYldSYnNWUGd3ZXdmaDRRcktreW83L29SU2FyOXFGd051QkthU1A4Ui8zNUt6WXhuYWNPdUxqWjUxSHBTa1B5cnFyOFQ4Z0JUTUFQczdsd2NMV3B4dm9TN3FKUUozQktIcXZKandaRXNia3N5K2ZkeURLRWpiVHFGdzFtMitTU3d2K2RrRGcwNER6SVF0WWJUeVp5VTZNM2lmbE5XQUFwWHloNGozbko3VWd4SExtb3F3aTFOcEFNTS84SnZVM2gwTnVhVHV0SUZLR05rN3NaM0FZNHdJR0hrWURlM2xsUGw3Q2NuRGF0bTM1N2xMcVBlczNJMjd6VkhyY2NxeXM4WktFWDdSQXNWamtwVnV1VUlxRUZTT2o4bjhVMjhEVUJCOE9rSTdlVXEwV3UwKzdtQ3oycXlKVFIyR2lJQkI2cVZSWUEvUGxJNTRadHdtTVdzMFk4ZzQ4VDdBa1FpTnJucUwxY1lWRHJnMlVSNVRsM05EM3VreUNINHF4eVJudzJJOTg5dGZKSjRtTmtRaVhnTmdTd1dvdkxPK0pPSHpJRGhEWnhhZlRsMzFOckhCNlpNVGhkTS9rMCtzYURvYnpPTS9EZDVOYmliejVIcEUzektONzVLTUYzR3A2aUpMOVZRMHRVbVlpVzdqZ0NSRTdqK1F3TTVxSGF2WFA3RTJGcUo5ejBGcnJoWWtuazJGQ0hyc0Jrc1ZyRCt5cDZRek42ekZQcU96YlFNZWZYSU5GVHNIZkZ2d1VCbnhlR09iWUFuU0tmZGRYR1V6Yi9NclBnKzNSUUdSYVNRN09aVmxRTjJYRTZQSUpwNVdWbzh3NlhYQ3pLUWNzWFJjQTIyaTdETUVUVHJIWHVZU254RjVQNWkvV056NElUMVA5TlBwMC93VXpqdWQ2NVVqM1FsQUI0a0k1K0FnN0FRN21TRFVFV3g3RVkwcHJuMUpUbGxHdldwS001c0ZHODUrN3pVUXNEYlEvQXlBZWllZGNuSVlHd0MwQ0gwdEQwY2hEM0FSRGdTTmtzNS9OMnpnMWRJNmRxYTRjdng0dUxKWGpFZEE9PSIsImRhdGFrZXkiOiJBUUVCQUhod20wWWFJU0plUnRKbTVuMUc2dXFlZWtYdW9YWFBlNVVGY2U5UnE4LzE0d0FBQUg0d2ZBWUpLb1pJaHZjTkFRY0dvRzh3YlFJQkFEQm9CZ2txaGtpRzl3MEJCd0V3SGdZSllJWklBV1VEQkFFdU1CRUVEQS83b0IyZS9KLzAvR2REUFFJQkVJQTc5c2E1Y0tRSUxPd0Z0bFk2dlUzWWdjT2NiZ0R1T0NCaldMWlFXRzNOQlh1MkhRRG9GdE9sdHhFYWw5bnlXWGFPMVo4ajFXYU1sZDAvRkVVPSIsInZlcnNpb24iOiIyIiwidHlwZSI6IkRBVEFfS0VZIiwiZXhwaXJhdGlvbiI6MTcxODI1NjkwMX0=","proxy_endpoint":"https://921283598378.dkr.ecr.us-east-1.amazonaws.com","registry_id":null,"user_name":"AWS"},"sensitive_values":{"authorization_token":true,"password":true}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"},"sensitive_values":{}},{"address":"data.tls_certificate.github_actions_oidc_endpoint","mode":"data","type":"tls_certificate","name":"github_actions_oidc_endpoint","provider_name":"registry.terraform.io/hashicorp/tls","schema_version":0,"values":{"certificates":[{"cert_pem":"-----BEGIN CERTIFICATE-----\nMIIEyDCCA7CgAwIBAgIQDPW9BitWAvR6uFAsI8zwZjANBgkqhkiG9w0BAQsFADBh\nMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3\nd3cuZGlnaWNlcnQuY29tMSAwHgYDVQQDExdEaWdpQ2VydCBHbG9iYWwgUm9vdCBH\nMjAeFw0yMTAzMzAwMDAwMDBaFw0zMTAzMjkyMzU5NTlaMFkxCzAJBgNVBAYTAlVT\nMRUwEwYDVQQKEwxEaWdpQ2VydCBJbmMxMzAxBgNVBAMTKkRpZ2lDZXJ0IEdsb2Jh\nbCBHMiBUTFMgUlNBIFNIQTI1NiAyMDIwIENBMTCCASIwDQYJKoZIhvcNAQEBBQAD\nggEPADCCAQoCggEBAMz3EGJPprtjb+2QUlbFbSd7ehJWivH0+dbn4Y+9lavyYEEV\ncNsSAPonCrVXOFt9slGTcZUOakGUWzUb+nv6u8W+JDD+Vu/E832X4xT1FE3LpxDy\nFuqrIvAxIhFhaZAmunjZlx/jfWardUSVc8is/+9dCopZQ+GssjoP80j812s3wWPc\n3kbW20X+fSP9kOhRBx5Ro1/tSUZUfyyIxfQTnJcVPAPooTncaQwywa8WV0yUR0J8\nosicfebUTVSvQpmowQTCd5zWSOTOEeAqgJnwQ3DPP3Zr0UxJqyRewg2C/Uaoq2yT\nzGJSQnWS+Jr6Xl6ysGHlHx+5fwmY6D36g39HaaECAwEAAaOCAYIwggF+MBIGA1Ud\nEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFHSFgMBmx9833s+9KTeqAx2+7c0XMB8G\nA1UdIwQYMBaAFE4iVCAYlebjbuYP+vq5Eu0GF485MA4GA1UdDwEB/wQEAwIBhjAd\nBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwdgYIKwYBBQUHAQEEajBoMCQG\nCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wQAYIKwYBBQUHMAKG\nNGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydEdsb2JhbFJvb3RH\nMi5jcnQwQgYDVR0fBDswOTA3oDWgM4YxaHR0cDovL2NybDMuZGlnaWNlcnQuY29t\nL0RpZ2lDZXJ0R2xvYmFsUm9vdEcyLmNybDA9BgNVHSAENjA0MAsGCWCGSAGG/WwC\nATAHBgVngQwBATAIBgZngQwBAgEwCAYGZ4EMAQICMAgGBmeBDAECAzANBgkqhkiG\n9w0BAQsFAAOCAQEAkPFwyyiXaZd8dP3A+iZ7U6utzWX9upwGnIrXWkOH7U1MVl+t\nwcW1BSAuWdH/SvWgKtiwla3JLko716f2b4gp/DA/JIS7w7d7kwcsr4drdjPtAFVS\nslme5LnQ89/nD/7d+MS5EHKBCQRfz5eeLjJ1js+aWNJXMX43AYGyZm0pGrFmCW3R\nbpD0ufovARTFXFZkAdl9h6g4U5+LXUZtXMYnhIHUfoyMo5tS58aI7Dd8KvvwVVo4\nchDYABPPTHPbqjc1qCmBaZx2vN4Ye5DUys/vZwP9BFohFrH/6j/f3IL16/RZkiMN\nJCqVJUzKoZHm1Lesh3Sz8W2jmdv51b2EQJ8HmA==\n-----END CERTIFICATE-----\n","is_ca":true,"issuer":"CN=DigiCert Global Root G2,OU=www.digicert.com,O=DigiCert Inc,C=US","not_after":"2031-03-29T23:59:59Z","not_before":"2021-03-30T00:00:00Z","public_key_algorithm":"RSA","serial_number":"17226682543955925492517929723242541158","sha1_fingerprint":"1b511abead59c6ce207077c0bf0e0043b1382612","signature_algorithm":"SHA256-RSA","subject":"CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1,O=DigiCert Inc,C=US","version":3},{"cert_pem":"-----BEGIN CERTIFICATE-----\nMIIIFTCCBv2gAwIBAgIQDxkWd9NEGyNLw9bIZv2g1TANBgkqhkiG9w0BAQsFADBZ\nMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMTMwMQYDVQQDEypE\naWdpQ2VydCBHbG9iYWwgRzIgVExTIFJTQSBTSEEyNTYgMjAyMCBDQTEwHhcNMjMw\nODA4MDAwMDAwWhcNMjQwODA3MjM1OTU5WjB7MQswCQYDVQQGEwJVUzETMBEGA1UE\nCBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZyYW5jaXNjbzEVMBMGA1UEChMM\nR2l0SHViLCBJbmMuMSgwJgYDVQQDDB8qLmFjdGlvbnMuZ2l0aHVidXNlcmNvbnRl\nbnQuY29tMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA4k8a9OWAmzfL\nZxLhbc70DP0uye9h+hFQ0CXKM5nq5lR0FNgycGr3xZPmKTR9wwR0Y3kmXN/mL23h\nvgnflw9Y1Zf8oE6PPOROTsYRliw6lTtgxyscpH7eWtVDXTSxytTSVI7r44S6ebtp\nXsxTG1MVtnS65OQe6iEgiW8NG+mfb4oSC0yC98tC9hW0qeNs1l00+fYMiwRojBx5\nXrTy0AbLyznx1nF4KGn4FR5qAOPhsUI3+7/jYEuZT5GTKxOizmujTvYLbo4sVgoj\nRdQJYYS1IKyp669UAkvKOxHDrAH+ugKDfTEvwdQIbsUXPvnQwnEJ4q2hj2y+Peg8\nNmQ/YfK0oVq0rNxNe3WFSSAZN3ntenDpy9H2sWEecxg00IbfHRHuW1fosZ38pCoC\ncTBCFVQN6/ECOGC+iJPo3hrhqHCxnLLVB0+s3tgM1WxQ3bNPwp5NHpDvxTnGfvIC\nXgT5buix8wf+Xld5mNiNACKBoqhdzIQga9cvQU85sPU0MBGiurfh/1G0TSLT0dJW\nzadok5vzPKSelNhn9WlDGE9RdkgzNOYLvHGiAkfoukMOXoyybNPnD/9CNMKjbILA\ngL6iMpY9xOAoF5Q133sB//NzI5i9AqW/+dZCjicwOS+4wuPyqVvabuSmZyqbwc6I\nNMS60oDnFSeddrJju4zJXlsx+pnOXBsCAwEAAaOCA7UwggOxMB8GA1UdIwQYMBaA\nFHSFgMBmx9833s+9KTeqAx2+7c0XMB0GA1UdDgQWBBR7WOKzctV85ISMI+MTPlnm\nqUqgfzBJBgNVHREEQjBAgh8qLmFjdGlvbnMuZ2l0aHVidXNlcmNvbnRlbnQuY29t\ngh1hY3Rpb25zLmdpdGh1YnVzZXJjb250ZW50LmNvbTAOBgNVHQ8BAf8EBAMCBaAw\nHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMIGfBgNVHR8EgZcwgZQwSKBG\noESGQmh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydEdsb2JhbEcyVExT\nUlNBU0hBMjU2MjAyMENBMS0xLmNybDBIoEagRIZCaHR0cDovL2NybDQuZGlnaWNl\ncnQuY29tL0RpZ2lDZXJ0R2xvYmFsRzJUTFNSU0FTSEEyNTYyMDIwQ0ExLTEuY3Js\nMD4GA1UdIAQ3MDUwMwYGZ4EMAQICMCkwJwYIKwYBBQUHAgEWG2h0dHA6Ly93d3cu\nZGlnaWNlcnQuY29tL0NQUzCBhwYIKwYBBQUHAQEEezB5MCQGCCsGAQUFBzABhhho\ndHRwOi8vb2NzcC5kaWdpY2VydC5jb20wUQYIKwYBBQUHMAKGRWh0dHA6Ly9jYWNl\ncnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydEdsb2JhbEcyVExTUlNBU0hBMjU2MjAy\nMENBMS0xLmNydDAJBgNVHRMEAjAAMIIBfAYKKwYBBAHWeQIEAgSCAWwEggFoAWYA\ndQDuzdBk1dsazsVct520zROiModGfLzs3sNRSFlGcR+1mwAAAYnWg4KeAAAEAwBG\nMEQCID49I0TCb/sfFom/gWdAAnAwY0lLg1a3ZheSuUuUZ/awAiBbY+RyBJAsFyIs\nTyjgo7x482okkqoEUdFHNVofmPny9wB1AEiw42vapkc0D+VqAvqdMOscUgHLVt0s\ngdm7v6s52IRzAAABidaDgtcAAAQDAEYwRAIgIjkhLyUFmcZH3M1Eg3br6jjS9XbX\nXteoTjckvYKB9NwCIGjI4b9spIT1JTDzzH4rMfd83028BRS/s0iDYJwlCroXAHYA\nPxdLT9ciR1iUHWUchL4NEu2QN38fhWrrwb8ohez4ZG4AAAGJ1oOCzgAABAMARzBF\nAiEAqjq/OMQ4ObREbWai8DoNZFKxzOArT95JzaPSZoeCf8ECIClHjtZ/Qm4oXBSe\nRfItIOyz7sC6TytYDtVHRdPs7PryMA0GCSqGSIb3DQEBCwUAA4IBAQCGObelVNjx\n/I1+aLKX7N8yB5vz26+y8q0qYmdBti2iAhfdQfLER8QRIwNeZRFy3qoHXk2uyZhB\nLkGv1vXTGWG7DTa0gwZKrvaWPFnx29e0MIpnS2XvnBxa7REYkbz3tbrSmybVKiHU\nPVANgJHDlTyGteHJ6Fpbti0v462jra+hddMEw1JG5K5G4GGgEBoFCaMm2AT3m3FK\njdqGPjFPuK8LZyoYaxGWtddxlzjxGhrkKJFbJmzBGVG48GzKhkRakerp85lTVHh7\nBD+/hhmANDvnnPtCGycYr+tCqz6x2Czl3Jhl8Jq9avYYkINgISgFfTWkTFCyB3QC\nAVK+YgnibWYr\n-----END CERTIFICATE-----\n","is_ca":false,"issuer":"CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1,O=DigiCert Inc,C=US","not_after":"2024-08-07T23:59:59Z","not_before":"2023-08-08T00:00:00Z","public_key_algorithm":"RSA","serial_number":"20068683064783400501503996458270826709","sha1_fingerprint":"959cb2b52b4ad201a593847abca32ff48f838c2e","signature_algorithm":"SHA256-RSA","subject":"CN=*.actions.githubusercontent.com,O=GitHub\\, Inc.,L=San Francisco,ST=California,C=US","version":3}],"content":null,"id":"43add1749d6d9832e0a8fca0784941273380c63a","url":"https://token.actions.githubusercontent.com","verify_chain":true},"sensitive_values":{"certificates":[{},{}]}}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.74.2"},"aws.us-east-1":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","alias":"us-east-1","version_constraint":"\u003e= 3.74.2","expressions":{"access_key":{"references":["local.access_key"]},"profile":{"references":["local.aws_profile"]},"region":{"references":["local.aws_region"]},"secret_key":{"references":["local.secret_key"]},"token":{"references":["local.token"]}}},"docker":{"name":"docker","full_name":"registry.terraform.io/kreuzwerker/docker","version_constraint":"\u003e= 2.13.0"},"docker.hashicorp":{"name":"docker","full_name":"registry.terraform.io/kreuzwerker/docker","alias":"hashicorp","version_constraint":"\u003e= 2.13.0","expressions":{"registry_auth":[{"address":{"references":["local.ecr_reg"]},"password":{"references":["data.aws_ecr_authorization_token.token.password","data.aws_ecr_authorization_token.token"]},"username":{"references":["data.aws_ecr_authorization_token.token.user_name","data.aws_ecr_authorization_token.token"]}}]}},"null":{"name":"null","full_name":"registry.terraform.io/hashicorp/null"},"tls":{"name":"tls","full_name":"registry.terraform.io/hashicorp/tls"}},"root_module":{"outputs":{"account_id":{"expression":{"references":["data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]}},"caller_arn":{"expression":{"references":["data.aws_caller_identity.current.arn","data.aws_caller_identity.current"]}},"caller_user":{"expression":{"references":["data.aws_caller_identity.current.user_id","data.aws_caller_identity.current"]}},"docker_build_context":{"expression":{"references":["local.dkr_img_src_path"]}},"ecr_repository_urls":{"expression":{"references":["aws_ecr_repository.ecr_repos"]},"description":"ECR URL's"},"ecrpush_role_arn":{"expression":{"references":["var.is_create_github_oidc","var.is_create_ecrpush_oicd_role","aws_iam_role.ecrpush[0].arn","aws_iam_role.ecrpush[0]","aws_iam_role.ecrpush"]},"description":"The ARN of the ECR Push IAM Role"},"ecrpush_role_name":{"expression":{"references":["var.is_create_github_oidc","var.is_create_ecrpush_oicd_role","aws_iam_role.ecrpush[0].name","aws_iam_role.ecrpush[0]","aws_iam_role.ecrpush"]},"description":"The name of the ECR Push IAM Role"},"ecrpush_role_policy_attachment_arn":{"expression":{"references":["var.is_create_github_oidc","var.is_create_ecrpush_oicd_role","aws_iam_role_policy_attachment.ecr_poweruser[0].policy_arn","aws_iam_role_policy_attachment.ecr_poweruser[0]","aws_iam_role_policy_attachment.ecr_poweruser"]}},"github_actions_oidc_provider_arn":{"expression":{"references":["aws_iam_openid_connect_provider.github_actions.arn","aws_iam_openid_connect_provider.github_actions"]}},"trigged_by":{"expression":{"references":["null_resource.build_push_dkr_img"]}}},"resources":[{"address":"aws_ecr_repository.ecr_repos","mode":"managed","type":"aws_ecr_repository","name":"ecr_repos","provider_config_key":"aws","expressions":{"force_delete":{"constant_value":true},"image_scanning_configuration":[{"scan_on_push":{"constant_value":true}}],"image_tag_mutability":{"constant_value":"MUTABLE"},"name":{"references":["each.value"]},"tags":{"references":["each.value"]}},"schema_version":0,"for_each_expression":{"references":["local.ecr_repos"]}},{"address":"aws_iam_openid_connect_provider.github_actions","mode":"managed","type":"aws_iam_openid_connect_provider","name":"github_actions","provider_config_key":"aws","expressions":{"client_id_list":{"references":["local.github_client_id"]},"thumbprint_list":{"references":["local.github_thumbprint"]},"url":{"references":["local.url_workflow_provider"]}},"schema_version":0},{"address":"aws_iam_role.ecrpush","mode":"managed","type":"aws_iam_role","name":"ecrpush","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["local.ecr_repos","local.oidc_provider_arn","local.plain_oidc_url","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]},"description":{"constant_value":"IAM Role to be assumed by GitHub Action"},"force_detach_policies":{"references":["var.force_detach_policies"]},"max_session_duration":{"references":["var.max_session_duration"]},"name":{"references":["local.ecrpush_role_name"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.iam_role_permissions_boundary"]},"tags":{"references":["local.tags","local.ecrpush_role_name"]}},"schema_version":0,"count_expression":{"references":["var.is_create_github_oidc","var.is_create_ecrpush_oicd_role"]}},{"address":"aws_iam_role_policy_attachment.ecr_poweruser","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecr_poweruser","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.ecr_poweruser_policy_arn"]},"role":{"references":["aws_iam_role.ecrpush[0].name","aws_iam_role.ecrpush[0]","aws_iam_role.ecrpush"]}},"schema_version":0,"count_expression":{"references":["var.is_create_github_oidc","var.is_create_ecrpush_oicd_role"]}},{"address":"null_resource.build_push_dkr_img","mode":"managed","type":"null_resource","name":"build_push_dkr_img","provider_config_key":"null","provisioners":[{"type":"local-exec","expressions":{"command":{"references":["path.module","local.dkr_img_src_path","each.key","local.ecr_reg","each.value.name","each.value","local.image_tag"]},"interpreter":{"constant_value":["bash","-c"]}}}],"expressions":{"triggers":{"references":["var.force_image_rebuild","local.dkr_img_src_sha256"]}},"schema_version":0,"for_each_expression":{"references":["aws_ecr_repository.ecr_repos"]},"depends_on":["aws_ecr_repository.ecr_repos"]},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_ecr_authorization_token.token","mode":"data","type":"aws_ecr_authorization_token","name":"token","provider_config_key":"aws","schema_version":0},{"address":"data.aws_iam_policy_document.federated_assume_policy","mode":"data","type":"aws_iam_policy_document","name":"federated_assume_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRoleWithWebIdentity"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"references":["local.ecr_repos"]},"variable":{"references":["local.plain_oidc_url"]}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["local.oidc_provider_arn"]},"type":{"constant_value":"Federated"}}]}]},"schema_version":0,"count_expression":{"references":["var.is_create_github_oidc"]}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.tls_certificate.github_actions_oidc_endpoint","mode":"data","type":"tls_certificate","name":"github_actions_oidc_endpoint","provider_config_key":"tls","expressions":{"url":{"references":["var.github_actions_oidc_url"]}},"schema_version":0}],"variables":{"TF_VAR_AWS_ACCESS_KEY_ID":{"description":"aws sts aws access key id"},"TF_VAR_AWS_ACCOUNT_ID":{"description":"aws account id"},"TF_VAR_AWS_PROFILE":{"default":"system-admin","description":"aws user account MFA profile"},"TF_VAR_AWS_REGION":{"description":"aws account region"},"TF_VAR_AWS_SECRET_ACCESS_KEY":{"description":"aws secret access key"},"TF_VAR_AWS_SESSION_TOKEN":{"description":"aws sts get-session-token"},"custom_role_name_prefix":{"default":"custom","description":"IAM role name to be \u003crole_name\u003e-GithubOIDCRole"},"ecr_poweruser_policy_arn":{"default":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryPowerUser","description":"AWS built in ECR PowerUser access policy arn"},"ecrpush_role_name_prefix":{"default":"ECR_ReadWrite","description":"IAM role name to be \u003crole_name\u003e-GithubOIDCRole"},"force_detach_policies":{"default":"false","description":"Flag to force detachment of policies attached to the IAM role."},"force_image_rebuild":{"default":false},"github_actions_oidc_url":{"default":"https://token.actions.githubusercontent.com","description":"The URL to use for the OIDC handshake"},"hash_script":{"default":"","description":"Path to script to generate hash of source contents"},"iam_role_path":{"default":"/","description":"Path under which to create IAM role."},"iam_role_permissions_boundary":{"default":"","description":"ARN of the permissions boundary to be used by the IAM role."},"is_create_custom_oicd_role":{"default":false,"description":"Whether to create custom oidc role"},"is_create_ecrpush_oicd_role":{"default":false,"description":"Whether to create ecr readwrite oidc role"},"is_create_github_oidc":{"default":true,"description":"Flag to enable/disable the creation of GitHub OIDC resources."},"is_create_oidc_provider":{"default":true,"description":"Flag to enable/disable the creation of the GitHub OIDC provider."},"is_create_securityscan_oicd_role":{"default":false,"description":"Whether to create securityscan oidc role"},"max_session_duration":{"default":3600,"description":"Maximum session duration in seconds."},"push_script":{"default":"","description":"Path to script to build and push Docker image"},"repository_provider":{"default":"https://github.com","description":"github"},"role_name_suffix":{"default":"GithubOIDCRole","description":"IAM role name to be \u003crole_name\u003e\u003crole_name_suffix\u003e"},"securityscan_role_name_prefix":{"default":"SecurityScan","description":"IAM role name to be \u003crole_name\u003e-GithubOIDCRole"},"tag":{"default":"latest","description":"Tag to use for deployed Docker image"},"tags":{"default":{},"description":"Custom tags which can be passed on to the AWS resources. They should be key value pairs having distinct keys"},"username":{"default":"franroav","description":"username"},"workflow_provider":{"default":"https://token.actions.githubusercontent.com","description":"github workflow token"}}}},"relevant_attributes":[{"resource":"data.aws_caller_identity.current","attribute":["user_id"]},{"resource":"data.aws_caller_identity.current","attribute":["arn"]},{"resource":"data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"null_resource.build_push_dkr_img","attribute":[]},{"resource":"data.tls_certificate.github_actions_oidc_endpoint","attribute":["certificates",0,"sha1_fingerprint"]},{"resource":"aws_iam_openid_connect_provider.github_actions","attribute":["arn"]},{"resource":"aws_ecr_repository.ecr_repos","attribute":[]}],"checks":[{"address":{"kind":"var","name":"github_actions_oidc_url","to_display":"var.github_actions_oidc_url"},"status":"pass","instances":[{"address":{"to_display":"var.github_actions_oidc_url"},"status":"pass"}]},{"address":{"kind":"var","name":"max_session_duration","to_display":"var.max_session_duration"},"status":"pass","instances":[{"address":{"to_display":"var.max_session_duration"},"status":"pass"}]}],"timestamp":"2024-06-12T17:34:59Z","errored":false}
